apiVersion: monitoring.coreos.com/v1
kind: Prometheus

metadata:
  name: istio-prometheus

spec:
  securityContext:
    fsGroup: 1001
    runAsUser: 1001
  storage:
    volumeClaimTemplate:
      spec:
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
---
apiVersion: v1
kind: Service

metadata:
  name: prometheus

spec:
  selector:
    app.kubernetes.io/instance: istio-prometheus
    app.kubernetes.io/name: prometheus
    app.kubernetes.io/version: 2.32.1
  type: ClusterIP
  ports:
    - protocol: TCP
      port: 9090
      targetPort: 9090