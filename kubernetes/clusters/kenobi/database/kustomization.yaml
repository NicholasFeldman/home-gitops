apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: database

resources:
  - namespace.yaml
  - secrets/shared-postgresql-ha-pgpool.yaml
  - secrets/shared-postgresql-ha-pgpool-users.yaml
  - secrets/shared-postgresql-ha-postgresql.yaml

helmCharts:
  - releaseName: shared
    name: postgresql-ha
    version: 8.2.9
    repo: https://charts.bitnami.com/bitnami
    namespace: database
    valuesInline:
      pgpool:
        existingSecret: shared-postgresql-ha-pgpool
        customUsersSecret: shared-postgresql-ha-pgpool-users
      postgresql:
        existingSecret: shared-postgresql-ha-postgresql
