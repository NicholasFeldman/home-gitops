apiVersion: argoproj.io/v1alpha1
kind: Application

metadata:
  name: kenobi-{{.Release.Namespace}}-kube-prometheus
  namespace: argocd

spec:
  destination:
    namespace: {{.Release.Namespace}}
    name: in-cluster
  project: kenobi
  source:
    chart: kube-prometheus
    repoURL: https://charts.bitnami.com/bitnami
    targetRevision: 6.6.11
    helm:
      releaseName: kube-prometheus
      values: |-
        prometheus:
          persistence:
            enabled: true
            storageClass: longhorn-database
        alertmanager:
          enabled: false
