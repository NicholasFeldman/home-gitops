apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - namespace.yaml

helmCharts:
  - releaseName: keycloak-postgres
    name: postgresql
    version: 10.16.2
    repo: https://charts.bitnami.com/bitnami
    namespace: auth
    valuesInline:
      postgresqlDatabase: keycloak
      initdbUser: keycloak
      initdbPassword: keycloak
  - releaseName: keycloak
    name: keycloak
    version: 6.1.1
    repo: https://charts.bitnami.com/bitnami
    namespace: auth
    valuesInline:
      postgresql:
        enabled: false
      externalDatabase:
        host: keycloak-postgres-postgresql.auth.svc.cluster.local
        user: keycloak
        database: keycloak
        password: keycloak
