apiVersion: argoproj.io/v1alpha1
kind: Application

metadata:
  name: skywalker-istio-system-kiali-server
  namespace: argocd

spec:
  destination:
    namespace: istio-system
    name: in-cluster
  project: skywalker
  source:
    chart: kiali-server
    repoURL: https://kiali.org/helm-charts/
    targetRevision: '1.65.0'
    helm:
      releaseName: kiali-server
    values:
      external_services:
        prometheus:
          # Prometheus service name is "metrics" and is in the "telemetry" namespace
          url: "http://prometheus-operated.monitoring.svc.cluster.local:9090/"
  ignoreDifferences:
    - group: '*'
      kind: ConfigMap
      jsonPointers:
        - /data/config.yaml
    - group: '*'
      kind: Deployment
      jsonPointers:
        - /spec/template/metadata/annotations
