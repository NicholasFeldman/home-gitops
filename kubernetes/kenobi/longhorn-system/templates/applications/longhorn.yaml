apiVersion: argoproj.io/v1alpha1
kind: Application

metadata:
  name: kenobi-longhorn-system-longhorn
  namespace: argocd

spec:
  destination:
    namespace: longhorn-system
    name: in-cluster
  project: kenobi
  source:
    chart: longhorn
    repoURL: https://charts.longhorn.io
    targetRevision: 1.2.4
    helm:
      releaseName: longhorn
      values: |-
        csi:
          kubeletRootDir: /var/lib/kubelet
        persistence:
          defaultClassReplicaCount: 2
          reclaimPolicy: Retain
        defaultSettings:
          backupTarget: nfs://hoth.feldman.in:/volume1/Kenobi Longhorn Backups
